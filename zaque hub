local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Cria uma ScreenGui para conter o botão
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui

-- Cria o botão ESP
local espButton = Instance.new("TextButton")
espButton.Size = UDim2.new(0, 100, 0, 50)
espButton.Position = UDim2.new(1, -110, 1, -60)
espButton.Text = "ESP Off"
espButton.Parent = screenGui

local espOn = false

-- Função para atualizar o ESP
local function updateESP()
    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer and player.Character then
            if espOn then
                if not player.Character:FindFirstChild("Highlight") then
                    local highlight = Instance.new("Highlight")
                    highlight.Adornee = player.Character
                    highlight.FillColor = Color3.new(1, 0, 0)
                    highlight.OutlineColor = Color3.new(1, 0, 0)
                    highlight.Parent = player.Character
                end
            else
                local highlight = player.Character:FindFirstChild("Highlight")
                if highlight then
                    highlight:Destroy()
                end
            end
        end
    end
end

-- Evento de clique do botão
espButton.MouseButton1Click:Connect(function()
    espOn = not espOn
    espButton.Text = espOn and "ESP On" or "ESP Off"
    updateESP()
end)

-- Atualiza o ESP a cada 2 segundos
while true do
    if espOn then
        updateESP()
    end
    wait(2)
end

-- Garantir que o GUI não desapareça quando o jogador morrer
player.CharacterAdded:Connect(function(character)
    if not screenGui.Parent then
        screenGui.Parent = playerGui
    end
end)

-- Garantir que o GUI seja recriado ao respawn
screenGui.ResetOnSpawn = false
